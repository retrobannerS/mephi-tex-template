% ----------- Math and theorems -----------
\RequirePackage{amsthm,amssymb,xparse,newtxmath}

\renewcommand{\thesubsubsection}{\arabic{subsubsection}}
\newcounter{lemms}
\newcounter{theorems}
\newcounter{definitions}
\newcounter{tasks}

\theoremstyle{plain}
\newtheorem{theorem}[theorems]{Теорема}
\newtheorem{lemma}[lemms]{Лемма}
\newtheorem{task}[tasks]{Задача}

\theoremstyle{definition} % "Определение"
\newtheorem{definition}[definitions]{Определение}
\newtheorem{corollary}{Следствие}[theorems]


\theoremstyle{remark} % "Примечание"
\newtheorem*{example}{Пример}
\newtheorem*{remark}{Замечание}

% Окружения внутри tasks

\newenvironment{condition}{\subsubsection*{Условие}}{}
\newenvironment{solution}{\subsubsection*{Решение}}{\vspace*{25pt}}
\newenvironment{answer}{\\\textbf{Ответ:}$}{$}


% Чтобы всё корректно добавлялось в оглавление

\newenvironment{Th}[1]
{\begin{theorem}
                \ifthenelse{\equal{#1}{}}
                {
                        \addcontentsline{toc}
                        {subsubsection}
                        {\protect Теорема \thetheorems.}
                        \textnormal{\\}
                }
                {
                        \addcontentsline{toc}
                        {subsubsection}
                        {\protect Теорема \thesubsubsection. (#1) }
                        \textnormal{\textbf{(#1)}\\}
                }
                }
                {\end{theorem}}

\newenvironment{Lm}[1]
{\begin{lemma}
                \ifthenelse{\equal{#1}{}}
                {
                        \addcontentsline{toc}
                        {subsubsection}
                        {\protect Лемма \thelemms.}
                        \textnormal{\\}
                }
                {
                        \addcontentsline{toc}
                        {subsubsection}
                        {\protect Лемма \thelemms. (#1) }
                        \textnormal{\textbf{(#1)}\\}
                }
                }
                {\end{lemma}}

\newenvironment{Def}[1]
{\begin{definition}
                \ifthenelse{\equal{#1}{}}
                {}
                {(\textit{#1})\\}}
                {\end{definition}}

\newenvironment{Task}[1]
{\begin{task}
                \ifthenelse{\equal{#1}{}}
                {
                        \addcontentsline{toc}
                        {subsubsection}
                        {\protect Задача \thetasks.}
                        \textnormal{\\}
                }
                {
                        \addcontentsline{toc}
                        {subsubsection}
                        {\protect Задача \thetasks. (#1) }
                        \textnormal{\textbf{(#1)}\\}
                }
                }
                {\end{task}}




% ----------- Math short-cats
\newcommand{\R}{\ensuremath{\mathbb{R}}}
\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\Cx}{\ensuremath{\mathbb{C}}}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}
\newcommand{\Q}{\ensuremath{\mathbb{Q}}}
\renewcommand{\phi}{\varphi}
\renewcommand{\epsilon}{\varepsilon}